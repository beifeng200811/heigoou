/*Obfuscated by JShaman.com*/const request=require('sync-request');const cheerio=require('cheerio');const {backdomain:backdomain}=require('./consta');const puppeteer=require('puppeteer');const process=require('process');const fs=require('fs');const {get:getConfig}=require('./appContext');exports['paserSecUid']=function paserSecUid(_0x4f7635,_0x12b4b9){var _0x5181c3=request('POST',backdomain()+'/sph/hg/dy/sec/'+_0x12b4b9,{'json':{'url':_0x4f7635}});var _0x4e97f5=JSON['parse'](_0x5181c3['getBody']('utf8'));return _0x4e97f5;};exports['paserVideos']=function paserVideos(_0x1e1d6e,_0x1289dc){var _0x4e3b31='https://www.iesdouyin.com/web/api/v2/aweme/post/?sec_uid='+_0x1e1d6e+'&max_cursor='+_0x1289dc+'&count=2000';const _0x1231cf=request('GET',_0x4e3b31)['getBody']()['toString']();return JSON['parse'](_0x1231cf);};exports['parseUrl']=function parseUrl(_0xf93964,_0x27b427){var _0x2efadf=request('POST',backdomain()+'/sph/hg/dy/va/'+_0xf93964,{'json':{'url':_0x27b427}});var _0x356d1d=JSON['parse'](_0x2efadf['getBody']('utf8'));return _0x356d1d;};exports['requestVideoDetails']=function requestVideoDetails(_0x361e98){const _0x46ba5f=request('GET',_0x361e98)['getBody']()['toString']();return JSON['parse'](_0x46ba5f);};exports['liveWatch']=function liveWatch(_0x1e5d6e,_0x102c71){let _0x5857eb={};const _0x23a413=request('GET','https://www.douyin.com/user/'+_0x1e5d6e,{'headers':{'accept':'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9','accept-language':'zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7','cache-control':'no-cache','user-agent':'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/101.0.0.0\x20Safari/537.36','pragma':'no-cache','cookie':_0x102c71,'origin':'https://www.douyin.com','referer':'https://www.douyin.com/'}})['getBody']()['toString']();const _0x191a3b=cheerio['load'](_0x23a413);var _0x39bf81=_0x191a3b('#RENDER_DATA')['text']();if(_0x39bf81){const _0x24d931=decodeURIComponent(_0x39bf81);const _0x31d877=JSON['parse'](_0x24d931);var _0x524a69=Object['keys'](_0x31d877);for(var _0x243165=0x2d4ed^0x2d4ed;_0x243165<_0x524a69['length'];_0x243165++){var _0x4562ff=_0x524a69[_0x243165];var _0x3c53ba=_0x31d877[_0x4562ff];if(_0x3c53ba['hasOwnProperty']('user')){const _0x32f83f=_0x3c53ba['user'];if(_0x32f83f['hasOwnProperty']('user')){const _0x535da9=_0x32f83f['user'];_0x5857eb['uid']=_0x535da9['uid'];_0x5857eb['secUid']=_0x535da9['secUid'];_0x5857eb['nickname']=_0x535da9['nickname'];_0x5857eb['desc']=_0x535da9['desc'];_0x5857eb['roomId']=_0x535da9['roomId'];_0x5857eb['ipLocation']=_0x535da9['ipLocation'];_0x5857eb['roomData']=_0x535da9['roomData'];_0x5857eb['awemeCount']=_0x535da9['awemeCount'];_0x5857eb['followingCount']=_0x535da9['followingCount'];_0x5857eb['followerCount']=_0x535da9['followerCount'];_0x5857eb['totalFavorited']=_0x535da9['totalFavorited'];_0x5857eb['age']=_0x535da9['age'];_0x5857eb['avatarUrl']=_0x535da9['avatarUrl'];_0x5857eb['avatar300Url']=_0x535da9['avatar300Url'];_0x5857eb['gender']=_0x535da9['gender'];_0x5857eb['mplatformFollowersCount']=_0x535da9['mplatformFollowersCount'];_0x5857eb['uniqueId']=_0x535da9['uniqueId'];}}if(_0x3c53ba['hasOwnProperty']('post')){const _0x8b625c=_0x3c53ba['post']['data'];_0x5857eb['postData']=_0x8b625c;}}}else{console['log']('没有找到\x20渲染数据'+_0x23a413);}return _0x5857eb;};exports['defaultCookie']=async function defaultCookie(){let _0x4cc15a='';let _0x2f3789;try{_0x2f3789=await puppeteer['launch']();console['log']('默认启动成功');}catch(_0x5ecaaa){let _0x5e9db2=getConfig('chromePath');if(_0x5e9db2){if(!fs['existsSync'](_0x5e9db2)){if(process['platform']=='win32'){_0x5e9db2='C:\x5cProgram\x20Files\x20(x86)\x5cGoogle\x5cChrome\x5cApplication\x5cchrome.exe';}else if(process['platform']=='linux'){}else if(process['platform']=='darwin'){_0x5e9db2='/Applications/Google\x20Chrome.app/Contents/MacOS/Google\x20Chrome';}}}console['log'](_0x5e9db2);_0x2f3789=await puppeteer['launch']({'executablePath':_0x5e9db2});}const _0x474e65=await _0x2f3789['newPage']();await _0x474e65['goto']('https://www.douyin.com');_0x4cc15a=await _0x474e65['evaluate'](()=>document['cookie']);console['log']('cookie\x20:\x20'+_0x4cc15a);await _0x2f3789['close']();return _0x4cc15a;};
